<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Assignment 4 | ECE326 | Programming Languages | Fall 2019</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Kuei (Jack) Sun">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/dashboard.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->
  </head>
<body data-spy="scroll" data-target=".sidebar"  data-offset="64">

<nav class="navbar navbar-dark navbar-expand-md fixed-top bg-dark shadow">
  <a class="navbar-brand pr-3" href="ece326.html">ECE326</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarCollapse">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="ece326.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="lectures.html">Lecture Notes</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="labs.html">Assignments</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="http://piazza.com/utoronto.ca/fall2019/ece326">Piazza Discussion</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://q.utoronto.ca/">Quercus Website</a>
      </li>
    </ul>
  </div>  
</nav>

<div class="container-fluid">
  <div class="row">
    <nav class="col-md-3 col-lg-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="#background">
              Background
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#setup">
              Setup
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#specification">
              Solution Requirements
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#submission">Code Submission</a>
          </li>
        </ul>
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Assignment 4: Concurrent In-Memory Database</h1>
      </div>
      <p><strong>Due Date: December 8th, 11:59pm</strong></p>
      <p><strong>Lab TA: Andrew Choi</strong></p>
      <p>In this assignment, you will build EasyDB&trade;, a multithreaded, highly concurrent in-memory database, using the Rust programming language.</p>
      

      <h4 id="background">Background</h4>
      
      <p>Since we have built the ORM client in the previous lab, we will extend this by creating the EasyDB server so it can serve requests using an in-memory database. EasyDB is a toy relational database that provides minimalistic features for managing structured data. In a relational database, data is organized into tables of columns and rows. A column in a database table is a set of data of a primitive type (that is supported by the database). A table is defined with a list of one or more named columns before any data can be inserted. A row is a set of related data that is given meaning through the table it exists in. To insert a row into a table, each value of the row must have the same type as what is defined in the table, in the same order. Also, the number of values in a row must be exactly equal to the number of columns defined in the table. For example, a User table may have the columns: <tt>firstName, lastName, height</tt> and <tt>age</tt>. A row in a User table may be ("Jay", "Sung", 5.5, 31), which correctly represents a single user in this table. A table, of course, can have many rows, allowing you to store multiple users in a User table.</p>
      
      <h4 id="setup">Setup</h4>
      <pre>
cd ~/ece326
tar -xf /cad2/ece326f/src/easydb.tar
git status # should say that "asst4/" directory is untracked
git add asst4
git commit -m "Initial code for Assignment 4"
git tag Asst4-start
git push
git push --tags
cd asst4
</pre>
      <p>To setup the rust compiler, <tt>rustc</tt>, you need to set the environment variable <tt>RUSTUP_HOME</tt>. You can do so, similar to how you set up to tester.</p>
      
      <pre>% echo $0</pre>

      <p>If the output shows <tt>sh</tt> or <tt>bash</tt>, then you are using <tt>bash</tt>. If the output shows <tt>csh</tt> or <tt>tcsh</tt>, then you are using <tt>csh</tt>.</p>
      
      <ol>
        <li>
          <p>For csh, add the following to the end of your ~/.cshrc:</p>
          <pre>setenv RUSTUP_HOME /cad2/ece326f/rust</pre>
        </li>
        <li>
          <p>For bash, add the following to the end of your ~/.bashrc:</p>
          <pre>export RUSTUP_HOME=/cad2/ece326f/rust</pre>
        </li>
      </ol>

      <p>The starter code is organized as follows:</p>
      <ul>
        <li><i>main.rs</i>: Contains the main function and parses command line arguments.</li>
        <li><i>packet.rs</i>: Handles network packets by serializing and deserializing requests from the client and responses from the server.</li>
        <li><i>schema.rs</i>: Parses the schema from a specified txt file into tables and columns. </li>
        <li><i>server.rs</i>: Handles connections and client requests. <b>You should modify this file </b>to implement the server response logic.</li>
      </ul>

      <h4 id="specification">Solution Requirements</h4>

      <p>Please first familiarize yourself again with the <a href="asst3.html">features of EasyDB</a>. You will need to make sure that your solution can read an EasyDB schema file, and implements the access protocol as described. You are highly suggested to use your ORM software, developed in assignment 3, to test the correctness of your EasyDB server.</p>

      <p>To recap the previous assignment, you are responsible for the 5 commands in EasyDB (<tt>INSERT, UPDATE, DROP, GET</tt>, and <tt>SCAN</tt>) from Lab 3. <b>You should not use any external Rust libraries</b>, aside from the standard Rust library. It is <b>solely your responsibility</b> to make sure your Rust code compiles on the lab machines.</p>

      <h4 id="submission">Code Submission</h4>
      <p>To submit your code with the current commit, use the <tt>Asst4-end</tt> tag. Remember to push the new tag to the remote repository.</p>

<pre>
git tag Asst4-end    // Creates tag for current submission for Assignment 4
git push --tags
</pre>

      <h4 id="advice">Tips and Advice</h4>

      <b>General</b>
      <ul>
        <li>Make sure you start early - Rust is not as forgiving as Python or even C++.</li>    
        <li>Plan how you will store the data using structs and data structures in the standard library. Try to think about how you will handle more complicated features such as cascade delete (if a row is referenced by rows in other tables, those rows will also be deleted).</li>
      </ul>

      <b>Rust</b>
      <ul>
        <li>The Rust compiler is very explicit in pinpointing where an error occurs, and often suggests hints to fix the problem. Try to read the error message carefully: it is often helpful!</li>    
        <li>By default, <a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html">Rust variables are immutable</a>. Make sure you add <tt>mut</tt> in front of the variable to make it mutable.</li>
        <li>Rust has <a href="https://doc.rust-lang.org/book/ch08-02-strings.html">two commonly used string types</a>: <tt>str</tt> and <tt>String</tt>. <tt>str</tt> is a string slice or an immutable reference to data (e.g. string literals stored in program binary), while the <tt>String</tt> type is growable, mutable and owned (stored in heap). Don't try to change <tt>str</tt> type strings!</li>
        <li>Get familiar with <a href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html">ownership and borrowing in Rust</a>, especially when you pass around data between functions. </li>
        <li><a href="https://doc.rust-lang.org/book/ch06-02-match.html">Rust matches are exhaustive</a>. If you don't match for a <tt>None</tt> case, the Rust compiler will throw an error.</li>
      </ul>
      

      
      <hr>
      <footer class="container text-center">
        <p>&copy; 2019 Kuei (Jack) Sun, University of Toronto</p>
      </footer>
    </main>
  </div>
</div>

<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    /* nothing for now */
  });
</script>
</body>
</html>